defmodule RLPTest do
  use ExUnit.Case, async: true
  doctest RLP

  test "encode longer value" do
    val = [
      <<206, 136, 59, 245, 199, 91, 183, 59, 212, 47, 132, 68, 225, 173, 45>>,
      <<213, 173, 5, 103, 108, 29, 179, 253, 220, 198, 236, 211, 204, 137, 69, 207,
        105, 54, 252, 15, 62, 73, 190, 96, 121, 176, 226, 22, 159, 221, 167, 5>>,
      <<0, 105, 204, 8, 221, 100, 13, 211, 103, 125, 13, 148, 5, 138, 118, 203, 52,
        28, 225, 76, 168, 115, 60, 75, 8, 24, 190, 75, 89, 153, 8, 247>>,
      <<206, 136, 53, 88, 115, 24, 249, 208, 219, 135, 132, 101, 7, 2, 163>>,
      <<192>>,
      <<203, 5, 143, 200, 168, 2, 177, 21, 191, 23, 209, 232, 105, 187, 24, 47, 106,
        98, 12, 249, 180, 105, 94, 230, 238, 9, 196, 228, 76, 46, 179, 192>>,
      <<192>>,
      <<206, 136, 53, 73, 237, 71, 180, 157, 226, 38, 132, 242, 53, 232, 252>>,
      <<192>>, <<192>>,
      <<206, 136, 61, 255, 1, 240, 93, 21, 121, 152, 132, 201, 95, 49, 73>>,
      <<206, 136, 55, 200, 137, 142, 105, 58, 238, 38, 132, 221, 215, 51, 22>>,
      <<206, 136, 51, 197, 138, 33, 79, 137, 123, 132, 132, 224, 191, 48, 179>>,
      <<92, 134, 127, 22, 133, 2, 74, 129, 136, 225, 18, 99, 168, 76, 150, 0, 182,
        132, 64, 148, 198, 123, 138, 215, 63, 153, 125, 41, 182, 71, 8, 205>>,
      <<206, 136, 48, 180, 76, 181, 133, 91, 160, 252, 132, 227, 218, 177, 37>>,
      <<192>>, <<192>>]

    assert RLP.encode(val) == <<249, 1, 0, 143, 206, 136, 59, 245, 199, 91, 183, 59, 212, 47, 132, 68, 225, 173, 45, 160, 213, 173, 5, 103, 108, 29, 179, 253, 220, 198, 236, 211, 204, 137, 69, 207, 105, 54, 252, 15, 62, 73, 190, 96, 121, 176, 226, 22, 159, 221, 167, 5, 160, 0, 105, 204, 8, 221, 100, 13, 211, 103, 125, 13, 148, 5, 138, 118, 203, 52, 28, 225, 76, 168, 115, 60, 75, 8, 24, 190, 75, 89, 153, 8, 247, 143, 206, 136, 53, 88, 115, 24, 249, 208, 219, 135, 132, 101, 7, 2, 163, 129, 192, 160, 203, 5, 143, 200, 168, 2, 177, 21, 191, 23, 209, 232, 105, 187, 24, 47, 106, 98, 12, 249, 180, 105, 94, 230, 238, 9, 196, 228, 76, 46, 179, 192, 129, 192, 143, 206, 136, 53, 73, 237, 71, 180, 157, 226, 38, 132, 242, 53, 232, 252, 129, 192, 129, 192, 143, 206, 136, 61, 255, 1, 240, 93, 21, 121, 152, 132, 201, 95, 49, 73, 143, 206, 136, 55, 200, 137, 142, 105, 58, 238, 38, 132, 221, 215, 51, 22, 143, 206, 136, 51, 197, 138, 33, 79, 137, 123, 132, 132, 224, 191, 48, 179, 160, 92, 134, 127, 22, 133, 2, 74, 129, 136, 225, 18, 99, 168, 76, 150, 0, 182, 132, 64, 148, 198, 123, 138, 215, 63, 153, 125, 41, 182, 71, 8, 205, 143, 206, 136, 48, 180, 76, 181, 133, 91, 160, 252, 132, 227, 218, 177, 37, 129, 192, 129, 192>>
  end
end
